---
title: 搜索规则写法
---

## 搜索参数介绍

| 名称         | 类型                                   | 含义                                   | 必填 |
|------------|--------------------------------------|--------------------------------------|----|
| url        | String | 搜索链接                                 | 是  |
| params     | [请求参数](/booksource/format.html#请求参数) | 请求参数                                 | 否  |
| list       | [规则项](/booksource/format.html#规则项)   | 搜索结果列表，匹配结果应该为节点列表                   | 是  |
| detailPage | [规则项](/booksource/format.html#规则项)   | 详情页链接规则                              | 否  |
| detail     | [详情规则](/booksource/format.html#详情规则) | 小说详情，其规则与list的类型必须一致，基于list的匹配结果进行选择 | 是  |


搜索规则中，**必填项有 搜索链接，规则列表，标题，目录地址**，不填写完整无法进行测试。

## 搜索参数的位置

可以定义关键词与页码参数。

::: v-pre
- 关键词：`{{keyword}}`
- 页码：`{{page}}`
:::

对于GET请求：

```
https://xxx.com?page={{page}}&kw={{keyword}}
https://xxx.com/search_{{keyword}}/{{page}}
```

对于POST表单或者JSON的，将参数放入请求体中。
```json
{
    "body": "page={{page}}&kw={{keyword}}"
}
```
::: v-pre
- 搜索参数中的`{{xxx}}`可以为**脚本**，比如可以填写 `{{page*100}}`，则会自动识别为脚本，并且会将页码乘以100再进行请求。
:::
- **搜索关键词编码**：如果填写了[请求参数](/booksource/format.html#请求参数)中的编码字段，那么就会采用对应编码对搜索关键词进行unicode编码。

## 搜索结果详情页写法

有时候小说详情信息直接在搜索结果页码就可以取到，有时候是个单独的详情页面，这个时候如果想要取到详情信息则需要查看本节。

1. 编写详情页规则，匹配结果为详情页URL（从搜索结果列表中）
2. 编写详情信息时，区分详情页(detail)与搜索结果页(search)，不填写默认为不填写默认为详情页（如果详情页规则未填写则默认从搜索结果页匹配）
```json
"coverUrl": {
    "rule": "xpath:/body/div[3]/ul",
    "page": "search 或者 detail",
},
```

**注意**

如果page指定为详情页，那么rule应该是一个相对于详情页完整的rule，不应该是基于列表的相对规则。

注意此处的详情规则是搜索规则中的小说信息的规则，不是[详情规则](/booksource/format.html#详情规则)。